MainActivity.xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".MainActivity">
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Calculator"
            android:textSize="30sp"
            android:textColor="@android:color/black"
            android:layout_centerHorizontal="true"
            android:layout_margin="20dp"
            android:id="@+id/calculator"/>
    <EditText
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/calculator"
            android:hint="Enter your first number: "
            android:inputType="number"
            android:id="@+id/first"/>
    <EditText
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/first"
            android:hint="Enter your second number: "
            android:inputType="number"
            android:id="@+id/second"/>
    <EditText
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/second"
            android:hint="Result: "
            android:inputType="number"
            android:id="@+id/result"/>
    <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="+"
            android:layout_below="@id/result"
            android:layout_margin="20dp"
            android:id="@+id/add"
            android:onClick="add"/>
    <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="-"
            android:layout_below="@id/result"
            android:layout_toRightOf="@id/add"
            android:layout_margin="20dp"
            android:id="@+id/subtract"
            android:onClick="subtraction"/>
    <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="*"
            android:layout_below="@id/result"
            android:layout_toRightOf="@id/subtract"
            android:layout_margin="20dp"
            android:id="@+id/multiply"
            android:onClick="multiplication"/>
    <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="/"
            android:layout_below="@id/subtract"
            android:layout_margin="20dp"
            android:id="@+id/divide"
            android:onClick="division"/>
    <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="%"
            android:layout_below="@id/subtract"
            android:layout_toRightOf="@id/divide"
            android:layout_margin="20dp"
            android:id="@+id/modulus"
            android:onClick="mod"/>
<TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Krishna"
            android:textColor="@android:color/black"
            android:textSize="30sp"
            android:layout_margin="40dp"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"/>
</RelativeLayout>

MainActivity.kt
package com.example.practs

import android.app.Activity
import android.content.ContentValues
import android.content.Intent
import android.content.pm.PackageManager
import android.net.Uri
import android.os.Build
import android.support.v7.app.AppCompatActivity
import android.os.Bundle
import android.provider.MediaStore
import android.widget.Toast
import kotlinx.android.synthetic.main.activity_main.*

class MainActivity : AppCompatActivity() {

    private val PERMISSION_CODE = 1000
    private val IMAGE_CAPTURE_CODE = 1001
    var image_uri: Uri? = null

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        capture_btn.setOnClickListener {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                if (checkSelfPermission(android.Manifest.permission.CAMERA) == PackageManager.PERMISSION_DENIED || checkSelfPermission(
                        android.Manifest.permission.WRITE_EXTERNAL_STORAGE
                    ) == PackageManager.PERMISSION_DENIED
                ) {
                    val permission =
                        arrayOf(android.Manifest.permission.CAMERA, android.Manifest.permission.WRITE_EXTERNAL_STORAGE)
                    requestPermissions(permission, PERMISSION_CODE)
                } else {
                    openCamera()
                }
            }
                else{
                    openCamera()
                }
            }
        }
        private fun openCamera() {
            val values = ContentValues()
            values.put(MediaStore.Images.Media.TITLE, "New Picture")
            values.put(MediaStore.Images.Media.DESCRIPTION, "From the Camera")
            image_uri = contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)
            //camera intent
            val cameraIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)
            cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, image_uri)
            startActivityForResult(cameraIntent, IMAGE_CAPTURE_CODE)
            image_view.setImageURI(image_uri)
        }

        override fun onRequestPermissionsResult(requestCode: Int, permissions: Array<out String>, grantResults: IntArray) {
            //called when user presses ALLOW or DENY from Permission Request Popup
            when (requestCode) {
                PERMISSION_CODE -> {
                    if (grantResults.size > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                        //permission from popup was granted
                        openCamera()
                    } else {
                        //permission from popup was denied
                        Toast.makeText(this, "Permission denied", Toast.LENGTH_SHORT).show()
                    }
                }
            }
        }

        override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
            //called when image was captured from camera intent
            if (resultCode == Activity.RESULT_OK) {
                //set image captured to image view
                image_view.setImageURI(image_uri)
            }
        }
    }

